from email.message import Message
from aiogram.types import message
from db import cursor, connect


async def report_info_handler(message: Message):
       msg = message
       user_id = msg.from_user.id
       user_name = cursor.execute("SELECT user_name from users where user_id = ?",(message.from_user.id,)).fetchone()
       user_name = str(user_name[0])
       await message.bot.send_message(message.chat.id , f"""
<a href='tg://user?id={user_id}'>{user_name}</a> , –≤–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ —Å–∏—Å—Ç–µ–º—É —Ä–µ–ø–æ—Ä—Ç–æ–≤ ‚õîÔ∏è

‚ö†Ô∏è | –ü—Ä–∞–≤–∏–ª–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ä–µ–ø–æ—Ä—Ç–æ–≤
      1Ô∏è‚É£ | –ú–∞—Ç–µ—Ä–∏—Ç—å—Å—è, –æ—Å–∫–æ—Ä–±–ª—è—Ç—å –∫–æ–≥–æ-–ª–∏–±–æ, –ø—Ä–æ—è–≤–ª—è—Ç—å –Ω–µ—É–≤–∞–∂–µ–Ω–∏–µ –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–µ.
      2Ô∏è‚É£ | –ö–∞–ø—Å–∏—Ç—å, –ø–∏—Å–∞—Ç—å –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–∞–º, –ø–∏—Å–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç-–∂–µ —Ç–µ–∫—Å—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–ª—É—á–∏–≤—à–∏ –Ω–∞ –Ω–µ–≥–æ –æ—Ç–≤–µ—Ç.
      3Ô∏è‚É£ | –í—Å—è—á–µ—Å–∫–∏ –¥—Ä–∞–∑–Ω–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –æ—Ç–≤–ª–µ–∫–∞—Ç—å –æ—Ç —Ä–∞–±–æ—Ç—ã.
      4Ô∏è‚É£ | –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å—Å—è/–ø–∏—Å–∞—Ç—å –≤–µ—â–∏ –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏ –∫–æ–µ–º –æ–±—Ä–∞–∑–æ–º –Ω–∏ –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ –∏–≥—Ä–µ
      5Ô∏è‚É£ | –ó–∞–ø—Ä–µ—â–µ–Ω–∞ —Ä–µ–∫–ª–∞–º–∞ –≤ –ª—é–±–æ–º –µ—ë –ø—Ä–æ—è–≤–ª–µ–Ω–∏–∏
      6Ô∏è‚É£ | –ó–∞–ø—Ä–µ—â–µ–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–≤–æ–∏–º –¥—Ä—É–∑—å—è–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –ø–æ –ª–∏—á–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º
      7Ô∏è‚É£ | –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∫–ª–µ–≤–µ—Ç–∞—Ç—å –Ω–∞ –∏–≥—Ä–æ–∫–æ–≤, –æ–±–≤–∏–Ω—è—Ç—å –∏—Ö –≤ –Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–∏ –Ω–µ —Å–æ–≤–µ—Ä—à–∞–ª–∏.
      8Ô∏è‚É£ | –†–µ–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É - –í–æ–ø—Ä–æ—Å/–ü—Ä–æ—Å—å–±–∞/–ñ–∞–ª–æ–±–∞ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ) –∏ –Ω–µ –∏–Ω–∞—á–µ. –ò–Ω—ã–µ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è –±—É–¥—É—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –±–µ–∑ –æ—Ç–≤–µ—Ç–∞ –∏ –±—É–¥–µ—Ç –≤—ã–¥–∞–Ω–æ –Ω–∞–∫–∞–∑–∞–Ω–∏–µ.

‚ö†Ô∏è | –§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–ø–æ—Ä—Ç–∞ - /report [—Å–æ–æ–±—â–µ–Ω–∏–µ]

‚õîÔ∏è–ü—Ä–æ—à—É –≤–∞—Å —Å–æ–±–ª—é–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–ø–æ—Ä—Ç–∞
       """, parse_mode='html')




async def report_handler(message: Message):
    user_name = cursor.execute("SELECT user_name from users where user_id = ?",(message.from_user.id,)).fetchone()
    user_name = str(user_name[0])
    user_id = message.from_user.id

    user_status = cursor.execute("SELECT user_status from users where user_id = ?",(message.from_user.id,)).fetchone()
    user_status = str(user_status[0])
    text = message.text[7:]
    
    if text == '':
       await message.reply( f"üÜò | <a href='tg://user?id={user_id}'>{user_name}</a>, —Ä–µ–ø–æ—Ä—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º", parse_mode='html')
       return
    rows = cursor.execute('SELECT user_id FROM users where user_status = "Helper_Admin"').fetchall()
    for row in rows:
       await message.bot.send_message(row[0], f"<b>üÜò–í–ê–ú –ü–†–ò–®–Å–õ –†–ï–ü–û–†–¢üÜò</b>\nüë® | –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å: <a href='tg://user?id={user_id}'>{user_name}</a>\nüí¨ |–°–æ–æ–±—â–µ–Ω–∏–µ: <i>{text}</i>", parse_mode='html')

    await message.bot.send_message(1887634547,f"""
<b>üÜò–í–ê–ú –ü–†–ò–®–Å–õ –†–ï–ü–û–†–¢üÜò</b>
üë® | –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å: <a href='tg://user?id={user_id}'>{user_name}</a>  
üí¨ |–°–æ–æ–±—â–µ–Ω–∏–µ: <i>{text}</i>
    """, parse_mode='html')  
    await message.reply(  f"‚úÖ | <a href='tg://user?id={user_id}'>{user_name}</a>, –≤–∞—à —Ä–µ–ø–æ—Ä—Ç –±—ã–ª —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏", parse_mode='html')
